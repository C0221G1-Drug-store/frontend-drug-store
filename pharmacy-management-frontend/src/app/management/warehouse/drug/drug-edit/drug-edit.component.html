<div class="modal-header">
  <h3 class="modal-title font-weight-bold" >Sửa thuốc</h3>
  <button type="button" class="close" aria-hidden="true" (click)="onNoClick()">&times;</button>
</div>
<div class="modal-body" *ngIf="drugId">
  <form id="form" [formGroup]="drugForm" novalidate>
    <div class="border border-dark mx-0 mt-2 pt-2 px-2">

      <div class="row d-flex align-items-center">
        <div class="col-lg-2">
          <label class="label-text">Tên thuốc <span style="color: red">(*)</span></label>
        </div>
        <div class="col-lg-10">
          <input class="form-control border border-dark" type="text" formControlName="drugName">
        </div>
      </div>
      <div class="row d-flex mb-3 align-items-center">
        <div class="col-lg-2">

        </div>
        <div class="col-lg-9">
          <div *ngIf="drugForm.get('drugName')?.invalid && (drugForm.get('drugName')?.dirty || drugForm.get('drugName')?.touched)">
            <small style="color: red">Tên thuốc không hợp lệ!</small>
          </div>
        </div>
        <div class="col-lg-1 px-0">

        </div>
      </div>
      <div class="row d-flex align-items-center">
        <div class="col-lg-2">
          <label class="label-text">Hoạt chất <span style="color: red">(*)</span></label>
        </div>
        <div class="col-lg-10">
          <input class="form-control border border-dark" type="text" formControlName="activeElement">
        </div>

      </div>
      <div class="row d-flex mb-3 align-items-center">
        <div class="col-lg-2">

        </div>
        <div class="col-lg-9">
          <div *ngIf="drugForm.get('activeElement')?.invalid && (drugForm.get('activeElement')?.dirty || drugForm.get('activeElement')?.touched)">
            <small style="color: red">Hoạt chất không hợp lệ!</small>
          </div>
        </div>
        <div class="col-lg-1 px-0">

        </div>
      </div>
      <div class="row d-flex align-items-center">
        <div class="col-lg-2">
          <label class="label-text">Công dụng <span style="color: red">(*)</span></label>
        </div>
        <div class="col-lg-10">
          <input class="form-control border border-dark" type="text" formControlName="drugFaculty">
        </div>

      </div>
      <div class="row d-flex mb-3 align-items-center">
        <div class="col-lg-2">

        </div>
        <div class="col-lg-9">
          <div *ngIf="drugForm.get('drugFaculty')?.invalid && (drugForm.get('drugFaculty')?.dirty || drugForm.get('drugFaculty')?.touched)">
            <small style="color: red">Công dụng không hợp lệ!</small>
          </div>
        </div>
        <div class="col-lg-1 px-0">

        </div>
      </div>
      <div class="row d-flex align-items-center">
        <div class="col-lg-2">
          <label class="label-text">Tác dụng phụ <span style="color: red">(*)</span></label>
        </div>
        <div class="col-lg-10">
          <input class="form-control border border-dark" type="text" formControlName="drugSideEffect">
        </div>

      </div>
      <div class="row d-flex mb-3 align-items-center">
        <div class="col-lg-2">

        </div>
        <div class="col-lg-9">
          <div *ngIf="drugForm.get('drugSideEffect')?.invalid && (drugForm.get('drugSideEffect')?.dirty || drugForm.get('drugSideEffect')?.touched)">
            <small style="color: red">Tác dụng phụ không hợp lệ!</small>
          </div>
        </div>
        <div class="col-lg-1 px-0">

        </div>
      </div>
      <div class="row d-flex align-items-center">
        <div class="col-lg-2">
          <label class="label-text">Nhóm thuốc <span style="color: red">(*)</span></label>
        </div>
        <div class="col-lg-10">
          <select  style="min-width: 100%;height: 33px" formControlName="drugGroup">
            <option selected [value]="null" disabled>Select</option>
            <option *ngFor="let type of drugGroups" [ngValue]="type">{{type.drugGroupName}}</option>
          </select>
        </div>

      </div>
      <div class="row d-flex mb-3 align-items-center">
        <div class="col-lg-2">

        </div>
        <div class="col-lg-9">
          <div *ngIf="drugForm.get('drugGroup')?.invalid && (drugForm.get('drugGroup')?.dirty || drugForm.get('drugGroup')?.touched)">
            <small style="color: red">Nhóm thuốc không hợp lệ!</small>
          </div>
        </div>
        <div class="col-lg-1 px-0">

        </div>
      </div>

      <hr class="mb-3" style="color: black">
      <div class="row align-items-center">
        <div class="col-lg-6">
          <div class="row">
            <div class="col-lg-4">
              <label class="label-text">Đơn vị <span style="color: red">(*)</span></label>
            </div>
            <div class="col-lg-6">
              <select style="min-width: 100%;height: 33px" formControlName="unit">
                <option selected value="" disabled>Select</option>
                <option>Thùng</option>
                <option>Hộp</option>
                <option>Vỉ</option>
                <option>Bịch</option>
              </select>
            </div>

          </div>
        </div>
        <div class="col-lg-6">
          <div class="row">
            <div class="col-lg-4 d-flex align-items-center">
              <label class="label-text">Ảnh thuốc</label>
            </div>
            <div class="col-lg-8">
              <div>
                <img *ngFor="let url of selectedImage" [src]="url" class="rounded" width="80">
              </div>
              <input class="pl-0" type="file" class="form-control-file pl-0" (change)="showPreview($event)" multiple>
            </div>
          </div>

        </div>
      </div>
      <div class="row d-flex mb-3 ">
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">
              <div *ngIf="drugForm.get('unit')?.invalid && (drugForm.get('unit')?.dirty || drugForm.get('unit')?.touched)">
                <small style="color: red">Đơn vị không hợp lệ!</small>
              </div>
            </div>

          </div>
        </div>
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">

            </div>

          </div>
        </div>
      </div>

      <div class="row d-flex ">
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">
              <label class="label-text">ĐVT Quy đổi <span style="color: red">(*)</span></label>
            </div>
            <div class="col-lg-6">
              <select style="min-width: 100%;height: 33px" formControlName="conversionUnit">
                <option selected value="" disabled>Select</option>
                <option>Gói</option>
                <option>Lọ</option>
                <option>Vỉ</option>
                <option>Viên</option>
              </select>
            </div>

          </div>
        </div>
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">
              <label class="label-text">Tỷ lệ quy đổi <span style="color: red">(*)</span></label>
            </div>
            <div class="col-lg-6">
              <input class="form-control border border-dark" type="text" formControlName="conversionRate">
            </div>

          </div>
        </div>
      </div>
      <div class="row d-flex mb-3 ">
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">
              <div *ngIf="drugForm.get('conversionUnit')?.invalid && (drugForm.get('conversionUnit')?.dirty || drugForm.get('conversionUnit')?.touched)">
                <small style="color: red">ĐVT Quy đổi không hợp lệ!</small>
              </div>
            </div>

          </div>
        </div>
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">
              <div *ngIf="drugForm.get('conversionRate')?.invalid && (drugForm.get('conversionRate')?.dirty || drugForm.get('conversionRate')?.touched)">
                <small style="color: red">Tỷ lệ quy đổi không hợp lệ!</small>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="row d-flex ">
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4 d-flex">
              <label class="label-text">% Lợi nhuận XC<span style="color: red">(*)</span></label>
            </div>
            <div class="col-lg-6">
              <input class="form-control border border-dark" type="text" formControlName="wholesaleProfitRate">
            </div>

          </div>
        </div>
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">
              <label class="label-text">% Lợi nhuận XL</label>
            </div>
            <div class="col-lg-6">
              <input class="form-control border border-dark" type="text" formControlName="retailProfitRate">
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex mb-3 ">
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">
              <div *ngIf="drugForm.get('wholesaleProfitRate')?.invalid && (drugForm.get('wholesaleProfitRate')?.dirty || drugForm.get('wholesaleProfitRate')?.touched)">
                <small style="color: red">%Lợi nhuận XC không hợp lệ!</small>
              </div>
            </div>

          </div>
        </div>
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">
              <div *ngIf="drugForm.get('retailProfitRate')?.invalid && (drugForm.get('retailProfitRate')?.dirty || drugForm.get('retailProfitRate')?.touched)">
                <small style="color: red">%Lợi nhuận XL không hợp lệ!</small>
              </div>
            </div>

          </div>

        </div>
      </div>
      <hr style="color: black">

      <div class="row d-flex ">
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4 d-flex">
              <label class="label-text">Nhà sản xuất</label>
            </div>
            <div class="col-lg-6">
              <input class="form-control border border-dark" type="text" formControlName="manufacturer">
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">
              <label class="label-text">Xuất xứ <span style="color: red">(*)</span></label>
            </div>
            <div class="col-lg-6">
              <select style="min-width: 100%;height: 33px" formControlName="origin">
                <option selected value="" disabled>Select</option>
                <option>Việt Nam</option>
                <option>Trung Quốc</option>
                <option>Mỹ</option>
              </select>
            </div>


          </div>
        </div>
      </div>
      <div class="row d-flex mb-3 ">
        <div class="col-lg-6">

          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">
              <div *ngIf="drugForm.get('manufacturer')?.invalid && (drugForm.get('manufacturer')?.dirty || drugForm.get('manufacturer')?.touched)">
                <small style="color: red">Nhà sản xuất không hợp lệ!</small>
              </div>
            </div>

          </div>

        </div>
        <div class="col-lg-6">
          <div class="row align-items-center">
            <div class="col-lg-4">

            </div>
            <div class="col-lg-8">
              <div *ngIf="drugForm.get('origin')?.invalid && (drugForm.get('origin')?.dirty || drugForm.get('origin')?.touched)">
                <small style="color: red">Xuất xứ không hợp lệ!</small>
              </div>
            </div>

          </div>
        </div>
      </div>
      <div class="row d-flex mb-3 align-items-center">
        <div class="col-lg-2">
          <label class="label-text">Ghi chú</label>
        </div>
        <div class="col-lg-9">
          <input class="form-control border border-dark" style="height: 66px" type="text" formControlName="note">
        </div>
      </div>
      <div class="row d-flex mb-3 align-items-center">
        <div class="col-lg-2">

        </div>
        <div class="col-lg-9">
          <div *ngIf="drugForm.get('note')?.invalid && (drugForm.get('note')?.dirty || drugForm.get('note')?.touched)">
            <p style="color: red">Ghi chú không hợp lệ!</p>
          </div>
        </div>
      </div>

    </div>

  </form>
</div>
<div class="modal-footer row d-flex pt-2">
    <div class="col-lg-4">
      <label class="label-text ml-4">(*) Thông tin bắt buộc</label>
    </div>
    <div class="col-lg-8 d-flex justify-content-end">
      <button class="mr-3 btn btn-edit button"(click)="updateDrug()" [disabled]="!drugForm.valid"><i
        class="fa fa-edit"></i> Sửa
      </button>
      <button class="mr-4 btn btn-return button"(click)="onNoClick()"><i
        class="fa fa-reply"></i> Trở về
      </button>
    </div>
</div>
